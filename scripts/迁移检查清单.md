# MatMatch 项目迁移检查清单

**新主机IP**: 172.16.100.211  
**迁移日期**: _______  
**操作人**: _______

---

## ✅ 迁移前准备（旧主机）

### 环境检查
- [ ] PostgreSQL 服务正常运行
- [ ] 项目代码最新版本已提交（Git）
- [ ] 无未保存的重要修改

### 数据导出
- [ ] 运行 `scripts\迁移准备-导出数据.bat`
- [ ] 确认备份文件已生成：`backup/matmatch_backup_*.dump`
- [ ] 记录备份文件大小：_______ MB

### 文件打包
- [ ] 项目代码已打包（排除 venv/, node_modules/）
- [ ] `.env` 文件已复制（如有）
- [ ] 确认文件完整性

---

## ✅ 新主机环境准备

### 软件安装
- [ ] Python 3.10+ 已安装（版本：_______）
- [ ] Node.js 18+ 已安装（版本：_______）
- [ ] PostgreSQL 12+ 已安装（版本：_______）
- [ ] Git 已安装

### 服务启动
- [ ] PostgreSQL 服务已启动
- [ ] 端口 5432 正常监听
- [ ] 数据库用户 `postgres` 密码正确

### 网络连通性
- [ ] 能访问 Oracle: 192.168.80.90:1521
- [ ] 内网IP 172.16.100.211 已配置
- [ ] 其他机器能 ping 通 172.16.100.211

---

## ✅ 项目部署（新主机）

### 代码部署
- [ ] 项目解压到：`D:\develop\python\MatMatch`
- [ ] 备份文件复制到：`D:\develop\python\MatMatch\backup\`
- [ ] `.env` 文件已复制（如有）

### 依赖安装
- [ ] Python 虚拟环境已创建
  ```bash
  python -m venv venv
  ```
- [ ] 后端依赖已安装
  ```bash
  .\venv\Scripts\activate
  pip install -r backend\requirements.txt
  ```
- [ ] 数据库工具依赖已安装
  ```bash
  pip install -r database\requirements.txt
  ```
- [ ] 前端依赖已安装
  ```bash
  cd frontend
  npm install
  ```

### 数据库恢复
- [ ] 运行 `scripts\迁移准备-导入数据.bat`
- [ ] 数据库 `matmatch` 已创建
- [ ] 数据导入成功
- [ ] 数据验证通过：
  - materials_master: _______ 条
  - synonyms: _______ 条
  - extraction_rules: _______ 条
  - knowledge_categories: _______ 条

---

## ✅ 配置更新

### IP配置更新
- [ ] 运行 `scripts\更新主机IP配置.bat`
- [ ] `backend/core/config.py` 已更新
- [ ] `backend/api/middleware.py` 已更新
- [ ] `docs/项目配置-当前环境.md` 已更新

### 手动配置检查
- [ ] `backend/core/config.py` - CORS origins 包含 172.16.100.211:3000
- [ ] `backend/api/middleware.py` - allowed_origins 包含新IP
- [ ] `backend/.env` - 数据库密码正确（如有）

### 防火墙配置（如需局域网访问）
- [ ] 允许端口 8000（后端API）
  ```bash
  netsh advfirewall firewall add rule name="MatMatch Backend" dir=in action=allow protocol=TCP localport=8000
  ```
- [ ] 允许端口 3000（前端）
  ```bash
  netsh advfirewall firewall add rule name="MatMatch Frontend" dir=in action=allow protocol=TCP localport=3000
  ```

---

## ✅ 服务启动

### 启动测试
- [ ] 运行 `.\智能启动.bat`
- [ ] 后端服务启动成功
- [ ] 前端服务启动成功
- [ ] 浏览器自动打开

### 访问验证
- [ ] 本机访问成功
  - API文档: http://localhost:8000/docs
  - 前端界面: http://localhost:3000
- [ ] 局域网访问成功（如需要）
  - API文档: http://172.16.100.211:8000/docs
  - 前端界面: http://172.16.100.211:3000

---

## ✅ 功能验证

### 基础功能
- [ ] 健康检查接口正常：`/health`
- [ ] API文档加载正常：`/docs`
- [ ] 前端首页加载正常

### 核心功能
- [ ] 物料查询功能正常
  - 测试查询：M16×1.5 螺栓
  - 返回结果数量：_______
- [ ] 批量查重功能正常
  - 上传测试Excel
  - 处理成功：[ ] 是 [ ] 否
- [ ] 管理后台功能正常
  - 访问：http://172.16.100.211:3000/admin/login
  - 登录密码：admin123
  - 登录成功：[ ] 是 [ ] 否
- [ ] 规则管理正常
  - 规则数量：_______
- [ ] 同义词管理正常
  - 同义词数量：_______
- [ ] 分类管理正常
  - 分类数量：_______

### ETL功能（可选）
- [ ] Oracle连接正常
  ```bash
  python database\test_oracle_connection.py
  ```
- [ ] ETL同步功能正常
  ```bash
  python backend\etl\run_full_sync.py
  ```

---

## ✅ 性能验证

### 响应时间
- [ ] API响应时间 < 2秒
- [ ] 首页加载时间 < 3秒
- [ ] 批量查重性能正常（100条 ≤ 30秒）

### 资源使用
- [ ] 后端内存使用：_______ MB
- [ ] 前端内存使用：_______ MB
- [ ] CPU使用率：_______ %

---

## ✅ 测试验证

### 单元测试
- [ ] 运行测试：`pytest backend/tests/ -v`
- [ ] 测试通过率：_______% （目标：100%）
- [ ] 失败测试：_______ 个

### 集成测试
- [ ] 运行测试：`pytest backend/tests/integration/ -v`
- [ ] 测试通过率：_______% （目标：100%）

---

## ✅ 文档更新

- [ ] 更新 `docs/项目配置-当前环境.md`
- [ ] 更新 `README.md`（如有IP相关信息）
- [ ] 创建迁移记录日志
- [ ] 通知团队成员新的访问地址

---

## ✅ 清理工作

### 旧主机
- [ ] 确认数据已完整迁移
- [ ] 备份文件已安全保存
- [ ] 旧服务已停止（如需要）

### 新主机
- [ ] 删除临时文件
- [ ] 清理测试数据
- [ ] 配置自动启动（如需要）

---

## 📋 问题记录

### 遇到的问题
1. _______________________________
2. _______________________________
3. _______________________________

### 解决方案
1. _______________________________
2. _______________________________
3. _______________________________

---

## ✅ 最终确认

- [ ] 所有功能验证通过
- [ ] 性能达到预期
- [ ] 文档已更新
- [ ] 团队已通知
- [ ] **迁移成功 ✅**

---

**迁移完成时间**: _______  
**验证人签名**: _______  
**备注**: _______

---

## 📞 紧急联系

遇到问题请参考：
- **详细迁移指南**: `docs/项目迁移指南-172.16.100.211.md`
- **开发者文档**: `docs/developer_onboarding_guide.md`
- **配置文档**: `docs/项目配置-当前环境.md`
- **今日问题日志**: `.gemini_logs/2025-10-09/21-00-00-管理后台完整修复日志-Task4.5最终版.md`

